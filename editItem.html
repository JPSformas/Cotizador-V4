<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Configuración de Producto</title>
  
  <!-- Bootstrap 5 & FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
 
  <link rel="stylesheet" href="Fonts/fonts.css">
  <link rel="stylesheet" href="Fonts/font-icons.css">
  <link href="styles/nuevo-header.css" rel="stylesheet">
  <link href="styles/complementos.css" rel="stylesheet">
  <link href="styles/sidebar.css" rel="stylesheet">
  <link href="styles/select-image-modal.css" rel="stylesheet">
  <link href="editItem.css" rel="stylesheet">
</head>
<body>

<!-- ==========  HEADER GLOBAL  ========== -->
<header class="navbar navbar-dark bg-black py-3">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="https://formas.shop/app">
      <img src="IMG/Logo Formas.shop 2025-02.png" alt="Logo" style="max-height:30px">
    </a>

    <!-- Iconos derecha -->
    <div class="d-flex align-items-center ms-auto">
      <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="avatar-circle d-inline-flex align-items-center justify-content-center me-2">
                <i class="fa-solid fa-user"></i>
              </span>
            <span class="d-none d-md-inline userDataName">Invitado</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
            <span class="dropdown-item-text userDataName-mobile">Invitado</span>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="/app/order/list">Mis pedidos</a></li>
            <li><a class="dropdown-item" href="/app/order/repeat">Últimas compras</a></li>
            <li><a class="dropdown-item" href="/app/order-cotization">Mis cotizaciones</a></li>
            <li><a class="dropdown-item" href="/logout">Salir</a></li>
        </ul>
      </div>
      <a href="/app/order" class="btn text-white position-relative"><i class="fas fa-cart-shopping fa-xl"></i>
        <span class="position-absolute top-10 start-90 translate-middle  cart-count">2</span>
      </a>
    </div>
  </div>
</header>

<!-- ==========  CONTENIDO PRINCIPAL  ========== -->
<main class="container py-4">
  <div class="d-flex justify-content-start align-items-center mb-4">
    <a href="detalle-cotizacion.html" class="back-link">
        <i class="fas fa-chevron-left"></i> Volver a detalle de cotización
    </a>
  </div>

  <form>
    <div class="card">
      <!-- Información Básica -->
      <div class="card-section">
        <h1 class="h4 mb-0 fw-bold mb-4">Configuración de Producto</h1>
        <h2 class="h5 mb-4">Información Básica</h2>
        <div class="row">
          <div class="col-md-3  mb-3 mb-md-0">
            <div class="product-image mb-3"><img src="IMG/placeholder3.jpg" class="product-img" id="selectedProductImage"></div>
            <button type="button" class="btn btn-outline-secondary w-100" id="selectImageBtn">Seleccionar imagen</button>
          </div>
          <div class="col-md-9">
            <div class="row mb-3">
              <div class="col-md-6 mb-3 mb-md-0">
                <label for="nombreVariante" class="form-label">Nombre del producto + Variante</label>
                <input type="text" id="nombreVariante" name="nombreVariante" class="form-control" value="Gorro Tiger - Gris claro">
              </div>
              <div class="col-md-6">
                <label for="SKU" class="form-label">SKU</label>
                <input type="text" id="SKU" name="SKU" class="form-control" value="ZEC_20037000001D55D55D63" disabled>
              </div>
            </div>
            <label for="Descripcion" class="form-label">Descripción del producto</label>
            <textarea id="Descripcion" name="Descripcion" class="form-control" rows="3">Gorro de 6 paneles realizado en Cotton Flex (microfibra). Cierre velcro tipo Shiny Soft y sticker metalizado en visera. Slazeneger</textarea>
          </div>
        </div>
      </div>

      <!-- Configuración de precios -->
      <div class="card-section">
        <h2 class="h5 mb-4">Configuración de Precios</h2>
        <div class="mb-4">
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="priceOption" id="printOptionPrice" value="conPrecio" checked>
            <label class="form-check-label" for="printOptionPrice">Con precio</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="priceOption" id="printOptionNoPrice" value="sinPrecio">
            <label class="form-check-label" for="printOptionNoPrice">Sin precio</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="priceOption" id="printOptionNoPrice&Stock" value="sinPrecio&Stock">
            <label class="form-check-label" for="printOptionNoPrice">Sin precio con stock</label>
          </div>
        </div>
        <div class="row mb-4 ">
          <div class="col-md-4 mb-3 mb-md-0" id="configPrecios">
            <label for="configPreciosSelect" class="form-label">Configuración de precios</label>
            <select class="form-select" id="configPreciosSelect">
                <option value="conPrecio" selected>Con precio</option>
                <option value="sinPrecio">Sin precio</option>
                <option value="sinPrecio&Stock">Sin precio con stock</option>
            </select>
          </div>
          <div class="col-md-3 mb-3 mb-md-0">
            <label for="PVP" class="form-label">PVP</label>
            <div class="input-group">
              <span class="input-group-text">$</span>
              <button type="button" class="icon-button"><i class="fas fa-edit"></i></button>
              <input type="text" inputmode="numeric" id="PVP" name="PVP" class="form-control form-control-sm" value="9.005,00" data-financial-format="true" disabled>
            </div>  
          </div>
          <div class="col-md-3 mb-3 mb-md-0">
            <label for="stockDisponible" class="form-label">Stock disponible</label>
            <input type="number" inputmode="numeric" id="stockDisponible" name="stockDisponible" class="form-control form-control-sm" value="2376" disabled>
          </div>
          <div class="col-md-3 mb-3 mb-md-0">
            <label for="minimoBonificacion" class="form-label">Mínimo para logo gratis</label>
            <div class="input-with-icon">
              <input type="number" inputmode="numeric" id="minimoBonificacion" name="minimoBonificacion" class="form-control form-control-sm" value="200">
              <button type="button" class="icon-button"><i class="fas fa-edit"></i></button>
            </div>
          </div>
          <div class="col-md-3">
            <label for="setupLogo" class="form-label">Setup logo</label>
            <div class="input-group">
              <span class="input-group-text">$</span>
              <button type="button" class="icon-button"><i class="fas fa-edit"></i></button>
              <input type="text" inputmode="numeric" id="setupLogo" name="setupLogo" class="form-control form-control-sm" value="30.000,00" data-financial-format="true">
              
            </div>  
          </div>
        </div>

        <!-- Tabla Desktop-->
        <div class="table-responsive mb-2">
          <table class="table">
            <thead>
              <tr>
                <th class="min-xs">Cantidad</th>
                <th class="min-md">Precio x Volumen</th>
                <th class="min-md">SETUP Prorrateado</th>
                <th class="min-md">Costo extra</th>
                <th class="min-sm">Margen</th>
                <th class="min-sm">Descuento</th>
                <th class="min-sm">Financiación</th>
                <th class="min-xl">Precio Unitario</th>
                <th class="min-xl">Subtotal</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="colCotizacionCantidad min-xs">
                  <input type="number" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionCantidad" value="10000">
                </td>
                <td class="colCotizacionPrecio min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionPrecio"  value="100.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionSetup min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionSetup" value="100.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionCostoExtra min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionCostoExtra" value="100.000,00" data-financial-format="true">   
                  </div>
                </td>
                <td class="colCotizacionMargen min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionMargen" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionDescuento min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionDescuento" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionFinanciacion min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionFinanciacion" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionPrecioUnitario min-xl">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionPrecioUnitario" value="100.000.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionSubtotal min-xl">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionSubtotal" value="100.000.000,00" data-financial-format="true" disabled>  
                  </div>  
                </td>
                <td class="text-center align-middle"><button type="button" class="delete-btn"><i class="far fa-trash-alt"></i></button></td>
              </tr>

              <tr>
                <td class="colCotizacionCantidad min-xs">
                  <input type="number" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionCantidad" value="10000">
                </td>
                <td class="colCotizacionPrecio min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionPrecio"  value="100.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionSetup min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionSetup" value="100.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionCostoExtra min-md">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionCostoExtra" value="100.000,00" data-financial-format="true">   
                  </div>
                </td>
                <td class="colCotizacionMargen min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionMargen" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionDescuento min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionDescuento" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionFinanciacion min-sm">
                  <div class="input-group">
                    <input type="number" step="any" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionFinanciacion" placeholder="100">
                    <span class="input-group-text">%</span>
                  </div>
                </td>
                <td class="colCotizacionPrecioUnitario min-xl">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionPrecioUnitario" value="100.000.000,00" data-financial-format="true" disabled>   
                  </div>
                </td>
                <td class="colCotizacionSubtotal min-xl">
                  <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="text" inputmode="numeric" class="form-control form-control-sm" name="colCotizacionSubtotal" value="100.000.000,00" data-financial-format="true" disabled>  
                  </div>  
                </td>
                <td class="text-center align-middle"><button type="button" class="delete-btn"><i class="far fa-trash-alt"></i></button></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Cards Mobile -->
        <div class="saved-quantities mb-3">
          <div class="quantities-card">
            <div class="fieldLabel" >Cantidad: <span class="fieldValue">100</span></div>
            <div class="fieldLabel" >Precio Unitario: <span class="fieldValue">$ 8.455,00</span></div>
            <div class="fieldLabel" >Subtotal: <span class="fieldValue">$ 845.500,00</span></div>
            <div class="action-buttons">
              <button type="button" class="edit-btn-mobile"  data-bs-toggle="offcanvas" data-bs-target="#sidebarMasElementos"><span>Editar</span></button>
              <button type="button" class="delete-btn-mobile"><span>Eliminar</span></button>
            </div>
          </div>

          <div class="quantities-card">
            <div class="fieldLabel" >Cantidad: <span class="fieldValue">200</span></div>
            <div class="fieldLabel" >Precio Unitario: <span class="fieldValue">$ 7.305,00</span></div>
            <div class="fieldLabel" >Subtotal: <span class="fieldValue">$ 1.461.000,00</span></div>
            <div class="action-buttons">
              <button type="button" class="edit-btn-mobile"  data-bs-toggle="offcanvas" data-bs-target="#sidebarMasElementos"><span>Editar</span></button>
              <button type="button" class="delete-btn-mobile"><span>Eliminar</span></button>
            </div>
          </div>
        </div>

        <!-- Boton Desktop -->
        <button type="button" class="btn btn-outline-secondary mb-3" style="font-size: 14px;" id="agregarCantidadDesktop"><i class="fas fa-plus"></i>Agregar cantidad</button>

        <!-- Boton Mobile -->
        <button type="button" class="btn btn-outline-secondary mt-3 w-100 d-md-none" id="agregarCantidadMobile" data-bs-toggle="offcanvas" data-bs-target="#sidebarMasElementos"><i class="fas fa-plus"></i>Agregar cantidad</button>
      </div>
    </div>

    <!-- Botones guardado -->
    <div class="d-flex justify-content-end mt-4">
      <a href="detalle-cotizacion.html" type="button" class="btn btn-outline-secondary me-3">Volver a la cotización "Prueba JP"</a>
      <button type="button" class="btn btn-primary" id="saveItemCotization"><i class="fas fa-save me-2"></i>Guardar ítem de cotización</button>
    </div>
  </form>

  <!-- Sidebar para más elementos (Mobile) -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="sidebarMasElementos" aria-labelledby="sidebarMasElementosLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="sidebarMasElementosLabel">Cantidades</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="d-grid gap-2">
        <!-- Campos -->
        <label class="form-label d-block w-100">
          <span>Cantidad</span> 
          <input type="number" class="form-control form-control-sm mt-2" name="colCotizacionCantidad" min="1" value="100">
        </label>
        <label class="form-label d-block w-100">
          <span>Precio x Volumen</span>
          <input type="text" class="form-control form-control-sm mt-2" name="colCotizacionPrecio" value="8.005,00" data-financial-format="true" disabled>
        </label>
        <label class="form-label d-block w-100">
          <span>SETUP Prorrateado</span>
          <input type="text" class="form-control form-control-sm mt-2" name="colCotizacionSetup" value="300,00" data-financial-format="true" disabled>
        </label>
        <label class="form-label d-block w-100">
          <span>Costo extra</span>
          <input type="text" class="form-control form-control-sm mt-2" name="colCotizacionCostoExtra" value="150,00" data-financial-format="true">
        </label>
        <label class="form-label d-block w-100">
          <span>Margen</span>
          <div class="input-group mt-2">
            <input type="number" class="form-control form-control-sm" name="colCotizacionMargen" placeholder="0" inputmode="numeric">
            <span class="input-group-text">%</span>
          </div>
        </label>
        <label class="form-label d-block w-100">
          <span>Descuento</span>
          <div class="input-group mt-2">
            <input type="number" class="form-control form-control-sm" name="colCotizacionDescuento" placeholder="0" inputmode="numeric">
            <span class="input-group-text">%</span>
          </div>
        </label>
        <label class="form-label d-block w-100">
          <span>Financiación</span>
          <div class="input-group mt-2">
            <input type="number" class="form-control form-control-sm" name="colCotizacionFinanciacion" placeholder="0" inputmode="numeric">
            <span class="input-group-text">%</span>
          </div>
        </label>
        <label class="form-label d-block w-100">
          <span>Precio Unitario</span>
          <input type="text" class="form-control form-control-sm mt-2" name="colCotizacionPrecioUnitario" value="8.455,00" data-financial-format="true" disabled>
        </label>
        <label class="form-label d-block w-100">
          <span>Subtotal</span>
          <input type="text" class="form-control form-control-sm mt-2" name="colCotizacionSubtotal" value="845.500,00" data-financial-format="true" disabled>
        </label>   
      </div>
    </div>
    <div class="offcanvas-footer">
      <button type="button" class="btn btn-primary w-100">Guardar</button>
    </div>
  </div>

  <!-- Image Selection Modal -->
  <div class="modal-backdrop" id="imageModal" style="display: none;">
    <div class="image-modal">
      <div class="modal-header">
        <h5>Seleccionar Imagen</h5>
        <button type="button" class="close-btn" id="closeModalBtn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="image-section">
          <h6>Imágenes subidas</h6>
          <div class="image-grid" id="uploadedImagesGrid">
            <!-- Uploaded images will be added here dynamically with delete buttons -->
            <div class="upload-area">
              <div class="upload-content">
                <i class="fas fa-upload"></i>
                <p>Arrastrá y soltá para agregar imágenes</p>
                <label class="upload-btn">
                  Examinar
                  <input type="file" hidden id="imageUploadInput" accept="image/*" multiple>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="image-section">
          <h6>Imágenes de producto</h6>
          <div class="image-grid" id="productImagesGrid">
            <div class="image-item" data-image="IMG/placeholder3SinLogoFrente.jpg" data-type="product" data-id="product-1">
              <img src="IMG/placeholder3SinLogoFrente.jpg" alt="Product image 1">
            </div>
            <div class="image-item" data-image="IMG/placeholder3SinLogoLateral1.jpg" data-type="product" data-id="product-2">
              <img src="IMG/placeholder3SinLogoLateral1.jpg" alt="Product image 2">
            </div>
            <div class="image-item" data-image="IMG/placeholder3SinLogoDorso.jpg" data-type="product" data-id="product-3">
              <img src="IMG/placeholder3SinLogoDorso.jpg" alt="Product image 3">
            </div>
            <div class="image-item" data-image="IMG/placeholder3SinLogoLatera2.jpg" data-type="product" data-id="product-4">
              <img src="IMG/placeholder3SinLogoLateral2.jpg" alt="Product image 3">
            </div>
          </div>
        </div>
        
        <div class="image-section">
          <h6>Imágenes personalizadas</h6>
          <div class="image-grid" id="zakekeImagesGrid">
            <div class="image-item" data-image="IMG/placeholder3.jpg" data-type="zakeke" data-id="zakeke-1">
              <img src="IMG/placeholder3.jpg" alt="Zakeke image 1">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Bootstrap bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js-scripts/select-image-modal.js"></script>
<script src="js-scripts/financial-formatting.js"></script>
</body>
</html>